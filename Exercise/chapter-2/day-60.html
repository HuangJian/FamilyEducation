<html>
<head>
  <script src="https://cdn.tailwindcss.com/3.0.12"></script>
</head>
<body>
  <section id="output">
    <div id="math" class="flex flex-col max-w-2xl mx-auto">
      <code class="hidden">
        4+?=6,7+?=12,17+?=35
        ?-4=5,?-17=17,?-12=27
        44-?=22,48-?=29,80-?=46
        22+25=?,37+44=?,46+34=?
        3*5=?,4*5=?,5*5=?
        ---
        ?+23=74-36,?-28=16+22
        14+?+42=77,25+18+12+23=?
        29+?=32-?,14+25+13-39=?
        ?-32=?+32,100-25-27-23=?
      </code>
      <div class="flex origin-left mt-2">
        <div class="question flex-1">
          <i>4</i><i>+</i><i class="box"></i><i>=</i><i>6</i>
        </div>
        <div class="question flex-1">
          <i>7</i><i>+</i><i class="box"></i><i>=</i><i>12</i>
        </div>
        <div class="question flex-1">
          <i>17</i><i>+</i><i class="box"></i><i>=</i><i>35</i>
        </div>
      </div>
      <div class="flex origin-left mt-2">
        <div class="question flex-1">
          <i class="box"></i><i>-</i><i>4</i><i>=</i><i>5</i>
        </div>
        <div class="question flex-1">
          <i class="box"></i><i>-</i><i>17</i><i>=</i><i>17</i>
        </div>
        <div class="question flex-1">
          <i class="box"></i><i>-</i><i>12</i><i>=</i><i>27</i>
        </div>
      </div>
      <div class="flex origin-left mt-2">
        <div class="question flex-1">
          <i>44</i><i>-</i><i class="box"></i><i>=</i><i>22</i>
        </div>
        <div class="question flex-1">
          <i>48</i><i>-</i><i class="box"></i><i>=</i><i>29</i>
        </div>
        <div class="question flex-1">
          <i>80</i><i>-</i><i class="box"></i><i>=</i><i>46</i>
        </div>
      </div>
      <div class="flex origin-left mt-2">
        <div class="question flex-1">
          <i>22</i><i>+</i><i>25</i><i>=</i><i class="box"></i>
        </div>
        <div class="question flex-1">
          <i>37</i><i>+</i><i>44</i><i>=</i><i class="box"></i>
        </div>
        <div class="question flex-1">
          <i>46</i><i>+</i><i>34</i><i>=</i><i class="box"></i>
        </div>
      </div>
      <div class="flex origin-left mt-2">
        <div class="question flex-1">
          <i>3</i><i>×</i><i>5</i><i>=</i><i class="box"></i>
        </div>
        <div class="question flex-1">
          <i>4</i><i>×</i><i>5</i><i>=</i><i class="box"></i>
        </div>
        <div class="question flex-1">
          <i>5</i><i>×</i><i>5</i><i>=</i><i class="box"></i>
        </div>
      </div>
      <hr class="mt-2">
      <div class="flex origin-left mt-2">
        <div class="question flex-1">
          <i class="box"></i><i>+</i><i>23</i><i>=</i><i>74</i><i>-</i><i>36</i>
        </div>
        <div class="question flex-1">
          <i class="box"></i><i>-</i><i>28</i><i>=</i><i>16</i><i>+</i><i>22</i>
        </div>
      </div>
      <div class="flex origin-left mt-2">
        <div class="question flex-1">
          <i>14</i><i>+</i><i class="box"></i><i>+</i><i>42</i><i>=</i><i>77</i>
        </div>
        <div class="question flex-1">
          <i>25</i><i>+</i><i>18</i><i>+</i><i>12</i><i>+</i><i>23</i><i>=</i><i class="box"></i>
        </div>
      </div>
      <div class="flex origin-left mt-2">
        <div class="question flex-1">
          <i>29</i><i>+</i><i class="box"></i><i>=</i><i>32</i><i>-</i><i class="box"></i>
        </div>
        <div class="question flex-1">
          <i>14</i><i>+</i><i>25</i><i>+</i><i>13</i><i>-</i><i>39</i><i>=</i><i class="box"></i>
        </div>
      </div>
      <div class="flex origin-left mt-2">
        <div class="question flex-1">
          <i class="box"></i><i>-</i><i>32</i><i>=</i><i class="box"></i><i>+</i><i>32</i>
        </div>
        <div class="question flex-1">
          <i>100</i><i>-</i><i>25</i><i>-</i><i>27</i><i>-</i><i>23</i><i>=</i><i class="box"></i>
        </div>
      </div>
    </div>
    <hr class="my-2">
    <div id="char" class="flex flex-col max-w-2xl mx-auto"><code class="hidden">迟日江山丽</code>
      <div class="flex scale-[0.7] origin-left w-fit sample">
        <svg>
          <use href="#char0"></use>
        </svg>
        <svg>
          <use href="#char0"></use>
        </svg>
        <svg>
          <use href="#char0"></use>
        </svg>
        <svg>
          <use href="#char0"></use>
        </svg>
        <svg>
          <use href="#char0"></use>
        </svg>
        <svg>
          <use href="#char0"></use>
        </svg>
        <svg>
          <use href="#char0"></use>
        </svg>
      </div>
      <div class="write-them-down flex w-100 justify-between">
        <svg>
          <g transform="translate(5, 43.671875) scale(0.04296875, -0.04296875)" id="char0">
            <path d="M 770 531 Q 797 627 834 651 Q 850 670 836 688 Q 758 746 708 716 Q 654 695 543 670 C 514 663 520 636 550 639 Q 565 639 583 646 Q 650 661 715 675 Q 731 679 739 673 Q 749 663 746 642 Q 733 579 717 530 C 708 501 762 502 770 531 Z"></path>
            <path d="M 532 462 Q 538 456 559 460 Q 632 478 788 493 Q 798 494 800 504 Q 800 511 770 531 C 757 540 746 537 717 530 Q 617 505 536 491 C 506 486 504 474 532 462 Z"></path>
            <path d="M 543 670 Q 528 682 505 690 Q 486 700 475 694 Q 465 687 471 675 Q 483 656 488 611 Q 488 410 438 297 Q 431 279 397 213 Q 393 206 391 201 Q 390 191 399 193 Q 426 197 486 308 Q 490 318 496 330 Q 523 402 532 462 L 536 491 Q 548 632 550 639 C 553 663 553 663 543 670 Z"></path>
            <path d="M 617 370 Q 702 294 802 186 Q 818 167 833 162 Q 842 161 849 171 Q 861 184 849 227 Q 837 290 624 397 Q 620 400 618 400 Q 609 404 607 393 Q 606 380 617 370 Z"></path>
            <path d="M 274 731 Q 305 703 341 668 Q 356 652 374 653 Q 387 654 392 669 Q 398 685 388 720 Q 382 742 346 761 Q 256 794 244 787 Q 238 783 240 768 Q 244 755 274 731 Z"></path>
            <path d="M 322 194 Q 329 201 334 216 Q 341 258 300 325 Q 267 382 348 476 Q 349 480 353 482 Q 375 501 356 516 Q 335 532 301 547 Q 279 560 261 542 Q 230 520 190 505 Q 138 483 120 486 Q 113 486 110 481 Q 109 477 117 472 Q 159 451 251 489 Q 261 492 269 482 Q 291 458 268 428 Q 217 376 254 321 Q 299 237 294 196 C 294 166 306 169 322 194 Z"></path>
            <path d="M 294 196 Q 252 199 208 185 Q 165 170 101 166 Q 94 166 90 157 Q 86 150 95 140 Q 111 121 135 109 Q 147 102 166 116 Q 248 170 324 153 Q 388 137 519 77 Q 742 -31 828 -6 Q 891 16 944 52 Q 968 67 944 67 Q 709 67 561 113 Q 486 137 397 172 Q 361 188 322 194 L 294 196 Z"></path>
          </g>
        </svg>
        <svg>
          <use href="#char0"></use>
        </svg>
        <svg>
          <use href="#char0"></use>
        </svg>
        <svg>
          <use href="#char0"></use>
        </svg>
        <svg>
          <use href="#char0"></use>
        </svg>
        <svg>
          <use href="#char0"></use>
        </svg>
        <svg></svg>
        <svg></svg>
        <svg></svg>
        <svg></svg>
        <svg></svg>
      </div>
      <div class="flex scale-[0.7] origin-left w-fit sample">
        <svg>
          <use href="#char1"></use>
        </svg>
        <svg>
          <use href="#char1"></use>
        </svg>
        <svg>
          <use href="#char1"></use>
        </svg>
        <svg>
          <use href="#char1"></use>
        </svg>
      </div>
      <div class="write-them-down flex w-100 justify-between">
        <svg>
          <g transform="translate(5, 43.671875) scale(0.04296875, -0.04296875)" id="char1">
            <path d="M 349 664 Q 348 665 347 666 Q 322 687 292 696 Q 282 697 274 689 Q 270 682 279 670 Q 331 531 294 261 Q 287 216 271 169 Q 262 141 267 118 Q 277 81 291 65 Q 304 50 314 66 Q 324 79 332 102 L 339 137 Q 349 186 350 238 Q 350 316 351 391 L 352 420 Q 353 576 361 626 C 364 652 364 652 349 664 Z"></path>
            <path d="M 608 120 Q 641 78 665 39 Q 675 18 688 19 Q 707 20 724 59 Q 745 104 740 157 Q 728 310 721 593 Q 720 629 738 654 Q 748 669 738 681 Q 716 703 656 730 Q 635 740 617 729 Q 512 684 349 664 C 319 660 332 620 361 626 Q 410 635 590 672 Q 624 679 640 666 Q 691 615 658 164 Q 657 163 657 159 Q 653 143 640 144 C 621 121 602 128 608 120 Z"></path>
            <path d="M 351 391 Q 390 378 433 387 Q 493 399 554 411 Q 582 417 587 421 Q 596 428 591 437 Q 584 447 556 455 Q 531 461 450 435 Q 375 423 352 420 C 322 416 322 400 351 391 Z"></path>
            <path d="M 332 102 Q 345 98 361 100 Q 440 115 608 120 C 638 121 661 122 640 144 Q 633 153 614 166 Q 596 178 561 170 Q 438 146 339 137 C 309 134 303 108 332 102 Z"></path>
          </g>
        </svg>
        <svg>
          <use href="#char1"></use>
        </svg>
        <svg>
          <use href="#char1"></use>
        </svg>
        <svg>
          <use href="#char1"></use>
        </svg>
        <svg>
          <use href="#char1"></use>
        </svg>
        <svg>
          <use href="#char1"></use>
        </svg>
        <svg></svg>
        <svg></svg>
        <svg></svg>
        <svg></svg>
        <svg></svg>
      </div>
      <div class="flex scale-[0.7] origin-left w-fit sample">
        <svg>
          <use href="#char2"></use>
        </svg>
        <svg>
          <use href="#char2"></use>
        </svg>
        <svg>
          <use href="#char2"></use>
        </svg>
        <svg>
          <use href="#char2"></use>
        </svg>
        <svg>
          <use href="#char2"></use>
        </svg>
        <svg>
          <use href="#char2"></use>
        </svg>
      </div>
      <div class="write-them-down flex w-100 justify-between">
        <svg>
          <g transform="translate(5, 43.671875) scale(0.04296875, -0.04296875)" id="char2">
            <path d="M 260 716 Q 282 691 305 661 Q 318 645 337 643 Q 349 643 356 657 Q 363 673 358 708 Q 354 729 324 746 Q 249 779 236 775 Q 230 771 230 757 Q 233 744 260 716 Z"></path>
            <path d="M 165 519 Q 204 461 234 445 Q 250 439 262 453 Q 271 466 270 486 Q 263 531 204 553 Q 168 568 154 565 Q 147 564 149 550 Q 149 537 165 519 Z"></path>
            <path d="M 150 174 Q 137 173 138 154 Q 145 75 179 53 Q 186 46 197 47 Q 204 48 208 73 Q 220 121 358 396 Q 367 411 366 418 Q 367 428 357 422 Q 336 410 199 218 Q 183 196 150 174 Z"></path>
            <path d="M 630 567 Q 705 585 784 600 Q 836 613 843 620 Q 853 629 848 639 Q 839 652 806 660 Q 778 666 666 629 Q 564 601 463 590 Q 421 583 451 564 Q 505 534 578 557 L 580 557 L 630 567 Z"></path>
            <path d="M 634 233 Q 661 470 675 501 Q 688 520 675 535 Q 651 556 630 567 C 604 582 570 585 580 557 Q 580 554 582 550 Q 592 532 594 462 Q 590 354 587 228 C 586 198 631 203 634 233 Z"></path>
            <path d="M 587 228 Q 466 215 326 200 Q 304 199 320 179 Q 353 146 396 155 Q 567 195 908 196 Q 927 196 947 195 Q 969 194 974 204 Q 981 217 963 232 Q 905 277 864 268 Q 779 252 634 233 L 587 228 Z"></path>
          </g>
        </svg>
        <svg>
          <use href="#char2"></use>
        </svg>
        <svg>
          <use href="#char2"></use>
        </svg>
        <svg>
          <use href="#char2"></use>
        </svg>
        <svg>
          <use href="#char2"></use>
        </svg>
        <svg>
          <use href="#char2"></use>
        </svg>
        <svg></svg>
        <svg></svg>
        <svg></svg>
        <svg></svg>
        <svg></svg>
      </div>
      <div class="flex scale-[0.7] origin-left w-fit sample">
        <svg>
          <use href="#char3"></use>
        </svg>
        <svg>
          <use href="#char3"></use>
        </svg>
        <svg>
          <use href="#char3"></use>
        </svg>
      </div>
      <div class="write-them-down flex w-100 justify-between">
        <svg>
          <g transform="translate(5, 43.671875) scale(0.04296875, -0.04296875)" id="char3">
            <path d="M 536 209 Q 546 407 552 587 Q 556 633 562 664 Q 569 691 574 710 Q 578 723 554 740 Q 512 762 484 767 Q 465 771 456 760 Q 447 751 457 734 Q 488 688 489 655 Q 499 444 488 200 C 487 170 534 179 536 209 Z"></path>
            <path d="M 796 244 Q 657 232 536 209 L 488 200 Q 379 182 284 155 Q 256 148 263 180 Q 267 253 272 329 Q 275 357 263 373 Q 220 416 190 409 Q 178 403 188 382 Q 224 309 215 236 Q 211 166 182 133 Q 161 112 170 96 Q 183 78 203 66 Q 219 57 230 67 Q 243 83 283 99 Q 440 151 606 182 Q 757 210 789 197 C 819 193 826 247 796 244 Z"></path>
            <path d="M 789 197 Q 783 166 774 145 Q 756 118 785 55 Q 795 36 809 49 Q 837 73 846 173 Q 868 386 890 427 Q 900 443 889 460 Q 867 479 831 501 Q 816 510 802 503 Q 793 499 796 484 Q 823 435 796 244 L 789 197 Z"></path>
          </g>
        </svg>
        <svg>
          <use href="#char3"></use>
        </svg>
        <svg>
          <use href="#char3"></use>
        </svg>
        <svg>
          <use href="#char3"></use>
        </svg>
        <svg>
          <use href="#char3"></use>
        </svg>
        <svg>
          <use href="#char3"></use>
        </svg>
        <svg></svg>
        <svg></svg>
        <svg></svg>
        <svg></svg>
        <svg></svg>
      </div>
      <div class="flex scale-[0.7] origin-left w-fit sample">
        <svg>
          <use href="#char4"></use>
        </svg>
        <svg>
          <use href="#char4"></use>
        </svg>
        <svg>
          <use href="#char4"></use>
        </svg>
        <svg>
          <use href="#char4"></use>
        </svg>
        <svg>
          <use href="#char4"></use>
        </svg>
        <svg>
          <use href="#char4"></use>
        </svg>
        <svg>
          <use href="#char4"></use>
        </svg>
      </div>
      <div class="write-them-down flex w-100 justify-between">
        <svg>
          <g transform="translate(5, 43.671875) scale(0.04296875, -0.04296875)" id="char4">
            <path d="M 513 662 Q 559 666 604 672 Q 721 687 848 678 Q 872 675 878 685 Q 885 698 872 710 Q 800 770 742 747 Q 526 702 214 670 Q 192 670 168 668 Q 155 667 154 656 Q 153 643 173 630 Q 189 618 221 607 Q 231 603 250 612 Q 263 616 328 629 Q 410 650 513 662 Z"></path>
            <path d="M 273 370 Q 277 445 283 467 Q 283 470 283 472 C 285 485 285 485 263 500 Q 244 515 224 521 Q 215 524 209 516 Q 205 510 212 500 Q 251 401 211 193 Q 190 103 190 101 Q 190 100 191 98 Q 198 65 209 53 Q 219 40 230 52 Q 261 86 263 197 Q 263 201 272 352 L 273 370 Z"></path>
            <path d="M 283 472 Q 301 475 371 494 Q 390 500 395 490 Q 399 477 402 456 Q 412 263 406 145 Q 405 118 397 106 Q 393 100 373 105 Q 348 109 323 115 Q 304 121 305 111 Q 359 68 390 34 Q 403 15 417 11 Q 426 8 434 17 Q 468 65 470 131 Q 443 435 468 478 Q 480 497 468 506 Q 449 524 413 538 Q 397 545 341 518 Q 310 509 263 500 C 234 494 254 466 283 472 Z"></path>
            <path d="M 272 352 Q 347 288 358 286 Q 365 287 370 296 Q 373 308 366 329 Q 362 344 338 355 Q 314 364 288 370 Q 276 373 273 370 C 257 364 257 364 272 352 Z"></path>
            <path d="M 591 375 Q 594 460 600 488 C 603 504 603 504 581 519 Q 563 534 540 541 Q 531 542 525 535 Q 521 529 529 519 Q 557 453 544 252 Q 543 248 543 243 Q 539 182 518 121 Q 511 96 514 78 Q 523 45 533 32 Q 543 19 554 32 Q 584 68 585 189 Q 585 270 590 349 L 591 375 Z"></path>
            <path d="M 600 488 Q 610 488 701 513 Q 723 517 728 506 Q 740 479 751 279 Q 757 110 745 89 Q 741 83 720 87 Q 696 91 672 95 Q 651 101 652 91 Q 707 43 738 7 Q 751 -12 769 -17 Q 779 -21 787 -10 Q 829 44 825 99 Q 786 447 810 497 Q 822 518 809 528 Q 787 547 747 562 Q 728 569 711 561 Q 678 542 658 535 Q 633 526 581 519 C 551 515 571 482 600 488 Z"></path>
            <path d="M 590 349 Q 606 337 666 283 Q 676 273 689 274 Q 698 274 701 285 Q 705 295 698 319 Q 694 338 664 353 Q 601 378 591 375 C 561 374 566 367 590 349 Z"></path>
          </g>
        </svg>
        <svg>
          <use href="#char4"></use>
        </svg>
        <svg>
          <use href="#char4"></use>
        </svg>
        <svg>
          <use href="#char4"></use>
        </svg>
        <svg>
          <use href="#char4"></use>
        </svg>
        <svg>
          <use href="#char4"></use>
        </svg>
        <svg></svg>
        <svg></svg>
        <svg></svg>
        <svg></svg>
        <svg></svg>
      </div>
    </div>
  </section>
  <style>
    path {
      /* 仅当 --char-index === --stroke-index 时，可得 1（true），否则 0 （false）*/
      --is-current: clamp(0,
          calc(1 - (var(--char-index) - var(--stroke-index)) * (var(--char-index) - var(--stroke-index))),
          1);
      /* 仅当 --char-index > --stroke-index 时，可得 1（true），否则 0 （false）*/
      --is-past: clamp(0,
          calc(var(--char-index) - var(--stroke-index)),
          1);
      /* 仅当 --char-index < --stroke-index 时，可得 1（true），否则 0 （false）*/
      --is-next: clamp(0,
          calc(var(--stroke-index) - var(--char-index)),
          1);
      /* 设计不同场景下笔画填色
    当前笔画：红色 - current: rgba(187,  68,  68, 1);
    之前笔画：黑色 - past:    rgba( 85,  85,  85, 1);
    后继笔画：透明 - next:    rgba(any, any, any, 0);
    描红笔画：灰色 - gray:    rgba(185, 185, 185, 1);
    */
      --stroke-color: rgba(calc(85 * var(--is-past) + 187 * var(--is-current) + 68 * var(--is-gray)),
          calc(85 * var(--is-past) + 68 * var(--is-current) + 68 * var(--is-gray)),
          calc(85 * var(--is-past) + 68 * var(--is-current) + 68 * var(--is-gray)),
          calc(1 - var(--is-next)));
      fill: var(--stroke-color);
    }
    :root {
      --is-gray: 0;
      /* 初始化为 100，使描红字样必定计算出 --is-past=1，--is-current=0 --is-next=0 */
      --char-index: 100;
    }
    .write-them-down {
      /* 描红格子里填充灰色 */
      --is-gray: 1;
    }
    #char>div>svg {
      display: inline-block;
      background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAAAP1BMVEUAAABFoFBGoFBGoFBGoVFGn1BDn1JEoVNFp1hEoE9En1FHoVJKoldFoE9GoFBFoFBGn1NGoE9HoU9GoVBEn1Jj1l/OAAAAFXRSTlMAMma7X201CQUsIRUNs6uPKKF6STipww1qAAABtklEQVRo3u2b2Y6DMAxFfQnD2pbO8v/fOlKL5JFoUZMmXpict4qSIyEwxrEpgFJpGkplIEKAvBiXm7mTFa9KNkuJWcjmwuKNDouYeHNTiYn7M0hFTD1V9FhAOiAUNaPdfbQLwIsLm3npcub0hRHmiACS8/aZqYB43HiFQuZpJFkxU8XP+IGSGAF5xGOvE7cRxiyhpuwifJK8d3u1RRfAZPn1/pwWVDEcMv8yKYmngFhxXyxu74txzmbuIsT89wJmFid4080sLp8g4+uh2E6cHC4gHQaq+ObTYM0ADRWBw0PEgVLmphHxsoLFIl6WnFgsGidXL4uvsvGZxcOVXsBRslfFd75VoydmEoTNbz2/7Ur8b4SAN87/WKGVV3+v4uTzBS71UW6uyMfpAAHkX4t3XouHSAQiUx/3yV5keus+oY/9hPH/0VYxxEBxmC03RRbY3JcU44uovsvGKYVy31sDk9mcq5KK/qZmjm1cTxvXCJ3XFoH7Ik7aMTI2oDhpubEdMqt4v3XOarNgyfZIiw2hDw/7br29LW6uzXmp3/sVKwMa6SMpekM4emNHeoNWWqNlesN0auODvzsxCat6cG0IAAAAAElFTkSuQmCC");
      background-size: contain;
      border: 1px solid rgba(70, 160, 80, 0.5);
      width: 54px;
      height: 54px;
    }
    #math {
      font-family: 'Courier New', Courier, monospace;
      font-size: 24px;
      color: #666;
    }
    #math .question {
      text-align: center;
    }
    #math .question:first-child {
      text-align: left;
    }
    #math .question:last-child {
      text-align: right;
    }
    #math .question>i {
      display: inline-block;
      vertical-align: middle;
      text-align: center;
      width: 36px;
      height: 36px;
      font-style: normal;
    }
    #math .box {
      border: 1px solid #aaa;
      border-radius: 2px;
    }
    .sample>svg+svg {
      margin-left: 4px;
    }
    .write-them-down+.sample {
      margin-top: 8px;
    }
    .write-them-down:not(:last-child) {
      padding-bottom: 12px;
      border-bottom: 1px solid #e5e7eb;
    }
  </style>
  <script>
    const injectedStyles = Array.from({ length: 100 })
      .map((_, idx) => `
      .sample > svg:nth-child(${idx + 1}) { --char-index: ${idx + 1}; }
      path:nth-child(${idx + 1}) { --stroke-index: ${idx + 1}; }
      `
      ).join('\n')
    document.querySelector('#injected')?.remove()
    document.head.insertAdjacentHTML('beforeend', `<style id="injected">${injectedStyles}</style>`) 
  </script>
</body>
</html>
