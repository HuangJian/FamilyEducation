<html>
<head>
    <script src="https://cdn.tailwindcss.com/3.0.12"></script>
</head>
<body>
    <section id="output">
        <div id="math" class="flex flex-col max-w-2xl mx-auto">
            <code class="hidden">
                261+524=?,233+575=?,462+656=?
                710-87=?,803-275=?,817-354=?
                77+?=890,252+?=837,341+?=913
                24*3=?,35*7=?,63*7=?
                96/8=?,72/6=?,120/10=?
                ---
                ?-230=747-432,183+278+366+116=?
                862-274=?+360,397+130+282-606=?
                280+?+357=916,457+274-124-337=?
                202+?-440=253,999-363-167-395=?
            </code>
            <div class="flex origin-left mt-2">
                <div class="question flex-1">
                    <i>261</i><i>+</i><i>524</i><i>=</i><i class="box"></i>
                </div>
                <div class="question flex-1">
                    <i>233</i><i>+</i><i>575</i><i>=</i><i class="box"></i>
                </div>
                <div class="question flex-1">
                    <i>462</i><i>+</i><i>656</i><i>=</i><i class="box"></i>
                </div>
            </div>
            <div class="flex origin-left mt-2">
                <div class="question flex-1">
                    <i>710</i><i>-</i><i>87</i><i>=</i><i class="box"></i>
                </div>
                <div class="question flex-1">
                    <i>803</i><i>-</i><i>275</i><i>=</i><i class="box"></i>
                </div>
                <div class="question flex-1">
                    <i>817</i><i>-</i><i>354</i><i>=</i><i class="box"></i>
                </div>
            </div>
            <div class="flex origin-left mt-2">
                <div class="question flex-1">
                    <i>77</i><i>+</i><i class="box"></i><i>=</i><i>890</i>
                </div>
                <div class="question flex-1">
                    <i>252</i><i>+</i><i class="box"></i><i>=</i><i>837</i>
                </div>
                <div class="question flex-1">
                    <i>341</i><i>+</i><i class="box"></i><i>=</i><i>913</i>
                </div>
            </div>
            <div class="flex origin-left mt-2">
                <div class="question flex-1">
                    <i>24</i><i>×</i><i>3</i><i>=</i><i class="box"></i>
                </div>
                <div class="question flex-1">
                    <i>35</i><i>×</i><i>7</i><i>=</i><i class="box"></i>
                </div>
                <div class="question flex-1">
                    <i>63</i><i>×</i><i>7</i><i>=</i><i class="box"></i>
                </div>
            </div>
            <div class="flex origin-left mt-2">
                <div class="question flex-1">
                    <i>96</i><i>÷</i><i>8</i><i>=</i><i class="box"></i>
                </div>
                <div class="question flex-1">
                    <i>72</i><i>÷</i><i>6</i><i>=</i><i class="box"></i>
                </div>
                <div class="question flex-1">
                    <i>120</i><i>÷</i><i>10</i><i>=</i><i class="box"></i>
                </div>
            </div>
            <hr class="mt-2">
            <div class="flex origin-left mt-2">
                <div class="question flex-1">
                    <i class="box"></i><i>-</i><i>230</i><i>=</i><i>747</i><i>-</i><i>432</i>
                </div>
                <div class="question flex-1">
                    <i>183</i><i>+</i><i>278</i><i>+</i><i>366</i><i>+</i><i>116</i><i>=</i><i class="box"></i>
                </div>
            </div>
            <div class="flex origin-left mt-2">
                <div class="question flex-1">
                    <i>862</i><i>-</i><i>274</i><i>=</i><i class="box"></i><i>+</i><i>360</i>
                </div>
                <div class="question flex-1">
                    <i>397</i><i>+</i><i>130</i><i>+</i><i>282</i><i>-</i><i>606</i><i>=</i><i class="box"></i>
                </div>
            </div>
            <div class="flex origin-left mt-2">
                <div class="question flex-1">
                    <i>280</i><i>+</i><i class="box"></i><i>+</i><i>357</i><i>=</i><i>916</i>
                </div>
                <div class="question flex-1">
                    <i>457</i><i>+</i><i>274</i><i>-</i><i>124</i><i>-</i><i>337</i><i>=</i><i class="box"></i>
                </div>
            </div>
            <div class="flex origin-left mt-2">
                <div class="question flex-1">
                    <i>202</i><i>+</i><i class="box"></i><i>-</i><i>440</i><i>=</i><i>253</i>
                </div>
                <div class="question flex-1">
                    <i>999</i><i>-</i><i>363</i><i>-</i><i>167</i><i>-</i><i>395</i><i>=</i><i class="box"></i>
                </div>
            </div>
        </div>
        <hr class="my-2">
        <div id="char" class="flex flex-col max-w-2xl mx-auto">
            <code class="hidden">但愿人长久</code>
            <div>
                <div class="flex scale-[0.7] origin-left w-fit sample">
                    <svg>
                        <g id="char0">
                            <path d="M 258 553 Q 295 605 338 670 Q 366 721 391 745 Q 401 757 397 772 Q 393 787 361 812 Q 331 831 311 832 Q 290 831 299 805 Q 314 771 301 743 Q 261 647 201 558 Q 143 473 64 378 Q 52 366 50 360 Q 46 347 62 350 Q 107 359 229 515 L 258 553 Z"></path>
                            <path d="M 229 515 Q 250 473 251 382 Q 250 372 250 360 Q 250 248 221 131 Q 206 82 243 34 Q 244 31 248 28 Q 267 12 279 40 Q 294 82 294 130 Q 293 407 302 469 Q 309 499 283 527 Q 277 533 258 553 C 237 575 217 543 229 515 Z"></path>
                            <path d="M 497 641 Q 487 648 449 658 Q 436 662 433 656 Q 426 650 434 634 Q 468 544 481 401 Q 482 358 504 328 Q 520 306 527 321 Q 531 331 533 346 L 533 380 Q 533 387 518 483 L 515 508 Q 505 572 503 602 C 501 632 500 640 497 641 Z"></path>
                            <path d="M 720 361 Q 721 357 723 353 Q 730 335 745 337 Q 760 340 769 357 Q 787 385 812 516 Q 828 577 870 613 Q 892 632 872 650 Q 850 669 791 698 Q 773 707 708 689 Q 680 689 497 641 C 468 633 474 595 503 602 Q 509 602 515 604 Q 576 626 719 649 Q 744 652 753 647 Q 768 640 761 595 Q 734 415 721 389 C 715 371 715 371 720 361 Z"></path>
                            <path d="M 518 483 Q 521 483 686 510 Q 711 514 701 528 Q 689 543 663 547 Q 630 550 515 508 C 487 498 488 479 518 483 Z"></path>
                            <path d="M 533 346 Q 539 345 547 346 Q 602 356 720 361 C 750 362 746 372 721 389 Q 715 393 706 400 Q 690 410 659 403 Q 590 388 533 380 C 503 376 503 348 533 346 Z"></path>
                            <path d="M 359 181 Q 335 180 352 159 Q 386 125 431 134 Q 656 185 934 165 Q 956 165 962 174 Q 969 187 950 204 Q 893 250 849 242 Q 708 215 359 181 Z"></path>
                        </g>
                    </svg>
                    <svg><use href="#char0"></use></svg>
                    <svg><use href="#char0"></use></svg>
                    <svg><use href="#char0"></use></svg>
                    <svg><use href="#char0"></use></svg>
                    <svg><use href="#char0"></use></svg>
                    <svg><use href="#char0"></use></svg>
                </div>
                <div class="write-them-down flex w-100 justify-between">
                    <svg><use href="#char0"></use></svg>
                    <svg><use href="#char0"></use></svg>
                    <svg><use href="#char0"></use></svg>
                    <svg><use href="#char0"></use></svg>
                    <svg><use href="#char0"></use></svg>
                    <svg><use href="#char0"></use></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                </div>
            </div>
            <hr class="my-2">
            <div>
                <div class="flex scale-[0.7] origin-left w-fit sample">
                    <svg>
                        <g id="char1">
                            <path d="M 530 744 Q 734 774 745 782 Q 754 789 750 797 Q 744 809 718 817 Q 697 823 580 794 Q 460 770 346 765 Q 342 765 340 763 C 311 758 323 739 353 735 Q 405 726 482 737 Q 485 738 491 738 L 530 744 Z"></path>
                            <path d="M 340 763 Q 327 775 308 784 Q 290 796 278 791 Q 266 785 272 772 Q 288 742 284 686 Q 281 670 280 650 Q 258 472 209 355 Q 163 250 76 133 Q 70 127 68 121 Q 65 111 76 113 Q 112 119 197 239 Q 210 263 226 289 Q 302 440 339 689 Q 342 701 353 735 C 358 750 358 750 340 763 Z"></path>
                            <path d="M 479 640 Q 543 706 551 710 Q 564 720 554 731 Q 544 738 530 744 C 503 756 487 763 491 738 Q 497 720 455 635 C 442 608 458 618 479 640 Z"></path>
                            <path d="M 431 629 Q 421 636 390 640 Q 380 643 376 638 Q 372 634 378 619 Q 405 564 419 475 Q 422 448 438 430 Q 454 411 458 425 Q 461 434 462 446 L 461 469 Q 460 476 459 483 Q 455 505 452 524 L 448 545 Q 441 585 440 601 C 438 625 438 625 431 629 Z"></path>
                            <path d="M 626 466 Q 642 441 657 434 Q 666 427 680 446 Q 692 465 717 572 Q 724 600 745 621 Q 755 633 746 644 Q 733 659 694 681 Q 682 687 610 670 Q 604 670 493 645 Q 484 644 479 640 L 455 635 Q 442 634 431 629 C 402 620 411 592 440 601 Q 509 623 626 644 Q 654 648 663 640 Q 673 628 671 616 Q 652 505 640 492 C 627 465 625 467 626 466 Z"></path>
                            <path d="M 452 524 Q 458 523 468 524 Q 553 540 616 550 Q 637 554 629 565 Q 619 578 597 582 Q 566 585 448 545 C 420 535 422 526 452 524 Z"></path>
                            <path d="M 557 457 Q 593 464 626 466 C 656 468 667 478 640 492 Q 633 496 623 499 Q 599 502 461 469 C 432 462 432 446 462 446 Q 466 446 474 446 Q 502 450 530 454 L 557 457 Z"></path>
                            <path d="M 530 454 Q 530 453 531 450 Q 540 425 537 345 Q 536 346 535 346 Q 532 336 515 340 Q 493 347 469 352 Q 460 353 459 349 Q 458 345 465 337 Q 514 297 530 273 Q 542 263 550 264 Q 557 265 567 290 Q 580 314 580 359 Q 577 389 578 400 Q 584 428 572 444 Q 565 451 557 457 C 534 476 522 483 530 454 Z"></path>
                            <path d="M 390 404 Q 372 371 350 342 Q 334 314 346 283 Q 353 267 371 278 Q 410 305 411 353 Q 415 381 411 404 Q 407 411 401 412 Q 394 411 390 404 Z"></path>
                            <path d="M 668 365 Q 693 343 720 313 Q 730 303 744 302 Q 753 302 757 313 Q 761 325 756 349 Q 750 377 666 405 Q 653 409 648 407 Q 644 403 644 393 Q 647 383 668 365 Z"></path>
                            <path d="M 275 195 Q 253 146 221 100 Q 200 67 217 33 Q 224 15 245 27 Q 294 63 299 137 Q 305 170 299 195 Q 293 204 288 205 Q 279 204 275 195 Z"></path>
                            <path d="M 371 201 Q 386 102 461 47 Q 566 -20 758 -7 Q 785 -1 811 8 Q 836 18 838 32 Q 842 42 805 68 Q 750 119 709 171 Q 697 187 693 180 Q 690 177 715 88 Q 721 61 693 51 Q 683 50 667 49 Q 514 49 451 111 Q 423 136 411 183 Q 405 205 394 211 Q 381 218 374 215 Q 368 214 371 201 Z"></path>
                            <path d="M 511 194 Q 557 148 587 138 Q 600 137 608 148 Q 612 160 609 174 Q 597 211 525 226 Q 521 227 519 228 Q 504 231 497 227 Q 491 226 494 215 Q 495 205 511 194 Z"></path>
                            <path d="M 730 235 Q 788 205 859 158 Q 878 143 892 143 Q 899 144 904 155 Q 911 170 891 205 Q 866 254 724 263 Q 714 266 716 254 Q 717 242 730 235 Z"></path>
                        </g>
                    </svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                </div>
                <div class="write-them-down flex w-100 justify-between">
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                </div>
            </div>
            <hr class="my-2">
            <div>
                <div class="flex scale-[0.7] origin-left w-fit sample">
                    <svg>
                        <g id="char2">
                            <path d="M 475 485 Q 547 653 563 683 Q 573 695 565 708 Q 558 721 519 742 Q 491 757 480 754 Q 462 750 465 730 Q 484 537 292 308 Q 280 296 269 284 Q 212 217 68 102 Q 58 92 66 89 Q 76 86 90 92 Q 190 138 274 210 Q 380 294 462 456 L 475 485 Z"></path>
                            <path d="M 462 456 Q 480 423 575 292 Q 666 171 733 101 Q 764 67 793 69 Q 881 75 958 79 Q 991 80 992 89 Q 993 98 956 112 Q 772 178 740 205 Q 617 304 490 466 Q 481 476 475 485 C 457 509 447 482 462 456 Z"></path>
                        </g>
                    </svg>
                    <svg><use href="#char2"></use></svg>
                </div>
                <div class="write-them-down flex w-100 justify-between">
                    <svg><use href="#char2"></use></svg>
                    <svg><use href="#char2"></use></svg>
                    <svg><use href="#char2"></use></svg>
                    <svg><use href="#char2"></use></svg>
                    <svg><use href="#char2"></use></svg>
                    <svg><use href="#char2"></use></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                </div>
            </div>
            <hr class="my-2">
            <div>
                <div class="flex scale-[0.7] origin-left w-fit sample">
                    <svg>
                        <g id="char3">
                            <path d="M 618 736 Q 625 717 616 700 Q 568 610 459 505 Q 449 496 445 491 Q 439 481 454 481 Q 464 481 493 499 Q 524 515 563 549 Q 606 582 654 634 Q 676 659 692 670 Q 702 679 700 693 Q 699 706 674 733 Q 650 755 632 758 Q 613 759 618 736 Z"></path>
                            <path d="M 498 376 Q 502 377 510 378 Q 561 382 608 389 Q 737 407 869 395 Q 894 394 900 402 Q 907 417 894 428 Q 863 456 816 475 Q 801 481 775 472 Q 687 451 477 421 Q 444 417 417 413 L 368 406 Q 170 384 144 381 Q 129 381 128 369 Q 128 356 148 342 Q 166 329 199 318 Q 209 314 229 323 Q 266 338 367 354 L 416 364 Q 431 368 450 370 L 498 376 Z"></path>
                            <path d="M 417 413 Q 423 683 431 705 Q 438 727 422 743 Q 395 764 365 771 Q 331 780 320 764 Q 311 751 327 736 Q 349 717 355 669 Q 368 593 368 406 L 367 354 Q 364 209 353 128 Q 349 77 327 49 Q 314 27 327 3 Q 343 -19 364 -27 Q 377 -34 390 -14 Q 409 23 519 149 Q 547 174 549 187 Q 550 194 544 196 Q 541 196 423 108 Q 410 95 407 113 Q 411 236 416 364 L 417 413 Z"></path>
                            <path d="M 450 370 Q 505 325 588 217 Q 708 73 756 64 Q 757 65 760 64 Q 850 60 923 69 Q 962 73 958 83 Q 957 89 921 102 Q 747 159 702 188 Q 620 240 511 363 Q 504 370 498 376 C 477 397 427 390 450 370 Z"></path>
                        </g>
                    </svg>
                    <svg><use href="#char3"></use></svg>
                    <svg><use href="#char3"></use></svg>
                    <svg><use href="#char3"></use></svg>
                </div>
                <div class="write-them-down flex w-100 justify-between">
                    <svg><use href="#char3"></use></svg>
                    <svg><use href="#char3"></use></svg>
                    <svg><use href="#char3"></use></svg>
                    <svg><use href="#char3"></use></svg>
                    <svg><use href="#char3"></use></svg>
                    <svg><use href="#char3"></use></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                </div>
            </div>
            <hr class="my-2">
            <div>
                <div class="flex scale-[0.7] origin-left w-fit sample">
                    <svg>
                        <g id="char4">
                            <path d="M 407 578 Q 443 633 489 712 Q 498 728 505 735 Q 512 741 510 753 Q 507 763 493 776 Q 451 807 418 799 Q 408 796 412 782 Q 431 688 299 515 Q 296 514 294 509 Q 255 460 157 361 Q 147 355 160 353 Q 224 365 342 491 Q 357 510 375 531 Q 385 544 397 562 L 407 578 Z"></path>
                            <path d="M 539 331 Q 585 406 631 503 Q 650 537 679 558 Q 697 568 697 579 Q 696 594 662 612 Q 619 637 603 638 Q 590 637 577 627 Q 507 596 439 581 Q 418 581 407 578 C 377 575 371 575 397 562 Q 442 528 518 564 Q 554 582 568 572 Q 577 566 555 503 Q 533 430 485 356 Q 418 244 320 159 Q 235 86 127 31 Q 117 25 118 20 Q 119 14 128 15 Q 261 21 424 183 Q 467 231 523 306 L 539 331 Z"></path>
                            <path d="M 523 306 Q 628 137 741 18 Q 766 -12 792 -11 Q 864 -1 925 7 Q 952 10 951 17 Q 952 24 922 39 Q 763 105 722 143 Q 610 245 539 331 C 520 354 507 331 523 306 Z"></path>
                        </g>
                    </svg>
                    <svg><use href="#char4"></use></svg>
                    <svg><use href="#char4"></use></svg>
                </div>
                <div class="write-them-down flex w-100 justify-between">
                    <svg><use href="#char4"></use></svg>
                    <svg><use href="#char4"></use></svg>
                    <svg><use href="#char4"></use></svg>
                    <svg><use href="#char4"></use></svg>
                    <svg><use href="#char4"></use></svg>
                    <svg><use href="#char4"></use></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                </div>
            </div>
        </div>
    </section>
    <style>
        path {
            /* 仅当 --char-index === --stroke-index 时，可得 1（true），否则 0 （false）*/
            --is-current: clamp(0,
                    calc(1 - (var(--char-index) - var(--stroke-index)) * (var(--char-index) - var(--stroke-index))),
                    1);
            /* 仅当 --char-index > --stroke-index 时，可得 1（true），否则 0 （false）*/
            --is-past: clamp(0,
                    calc(var(--char-index) - var(--stroke-index)),
                    1);
            /* 仅当 --char-index < --stroke-index 时，可得 1（true），否则 0 （false）*/
            --is-next: clamp(0,
                    calc(var(--stroke-index) - var(--char-index)),
                    1);
            /* 设计不同场景下笔画填色
                当前笔画：红色 - current: rgba(187,  68,  68, 1);
                之前笔画：黑色 - past:    rgba( 85,  85,  85, 1);
                后继笔画：透明 - next:    rgba(any, any, any, 0);
                描红笔画：灰色 - gray:    rgba(185, 185, 185, 1);
                */
            --stroke-color: rgba(calc(85 * var(--is-past) + 187 * var(--is-current) + 68 * var(--is-gray)),
                    calc(85 * var(--is-past) + 68 * var(--is-current) + 68 * var(--is-gray)),
                    calc(85 * var(--is-past) + 68 * var(--is-current) + 68 * var(--is-gray)),
                    calc(1 - var(--is-next)));
            fill: var(--stroke-color);
        }
        :root {
            --is-gray: 0;
            /* 初始化为 100，使描红字样必定计算出 --is-past=1，--is-current=0 --is-next=0 */
            --char-index: 100;
        }
        .write-them-down {
            /* 描红格子里填充灰色 */
            --is-gray: 1;
        }
        #char svg {
            display: inline-block;
            background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAAAP1BMVEUAAABFoFBGoFBGoFBGoVFGn1BDn1JEoVNFp1hEoE9En1FHoVJKoldFoE9GoFBFoFBGn1NGoE9HoU9GoVBEn1Jj1l/OAAAAFXRSTlMAMma7X201CQUsIRUNs6uPKKF6STipww1qAAABtklEQVRo3u2b2Y6DMAxFfQnD2pbO8v/fOlKL5JFoUZMmXpict4qSIyEwxrEpgFJpGkplIEKAvBiXm7mTFa9KNkuJWcjmwuKNDouYeHNTiYn7M0hFTD1V9FhAOiAUNaPdfbQLwIsLm3npcub0hRHmiACS8/aZqYB43HiFQuZpJFkxU8XP+IGSGAF5xGOvE7cRxiyhpuwifJK8d3u1RRfAZPn1/pwWVDEcMv8yKYmngFhxXyxu74txzmbuIsT89wJmFid4080sLp8g4+uh2E6cHC4gHQaq+ObTYM0ADRWBw0PEgVLmphHxsoLFIl6WnFgsGidXL4uvsvGZxcOVXsBRslfFd75VoydmEoTNbz2/7Ur8b4SAN87/WKGVV3+v4uTzBS71UW6uyMfpAAHkX4t3XouHSAQiUx/3yV5keus+oY/9hPH/0VYxxEBxmC03RRbY3JcU44uovsvGKYVy31sDk9mcq5KK/qZmjm1cTxvXCJ3XFoH7Ik7aMTI2oDhpubEdMqt4v3XOarNgyfZIiw2hDw/7br29LW6uzXmp3/sVKwMa6SMpekM4emNHeoNWWqNlesN0auODvzsxCat6cG0IAAAAAElFTkSuQmCC");
            background-size: contain;
            border: 1px solid rgba(70, 160, 80, 0.5);
            width: 54px;
            height: 54px;
        }
        g {
            transform: translate(5px, 43.671875px) scale(0.04296875, -0.04296875);
        }
        .sample>svg+svg {
            margin-left: 4px;
        }
        #math {
            font-family: 'Courier New', Courier, monospace;
            font-size: 24px;
            color: #666;
        }
        #math .question {
            text-align: center;
        }
        #math .question:first-child {
            text-align: left;
        }
        #math .question:last-child {
            text-align: right;
        }
        #math .question>i {
            display: inline-block;
            vertical-align: middle;
            text-align: center;
            width: 36px;
            height: 36px;
            font-style: normal;
        }
        #math .box {
            border-bottom: 1px solid #aaa;
        }
    </style>
    <script>
        const injectedStyles = Array.from({ length: 100 })
            .map((_, idx) => `
                .sample > svg:nth-child(${idx + 1}) { --char-index: ${idx + 1}; }
                path:nth-child(${idx + 1}) { --stroke-index: ${idx + 1}; }
                `
            ).join('\n')
        document.querySelector('#injected')?.remove()
        document.head.insertAdjacentHTML('beforeend', `<style id="injected">${injectedStyles}</style>`)
    </script>
</body>
</html>
