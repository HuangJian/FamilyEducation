<html>
<head>
    <script src="https://cdn.tailwindcss.com/3.0.12"></script>
</head>
<body>
    <section id="output">
        <div id="math" class="flex flex-col max-w-2xl mx-auto">
            <code class="hidden">
                448+375=?,275+474=?,455+725=?
                775-50=?,910-626=?,950-120=?
                36+?=883,291+?=793,333+?=966
                47*7=?,9*93=?,368*4=?
                368/8=?,795/5=?,918/6=?
                ---
                ?-203=890-490,100+186+408+102=?
                790-222=?+303,530+354+228-942=?
                276+?+312=940,441+432-233-369=?
                298+?-561=493,999-241-182-475=?
            </code>
            <div class="flex origin-left mt-2">
                <div class="question flex-1">
                    <i>448</i><i>+</i><i>375</i><i>=</i><i class="box"></i>
                </div>
                <div class="question flex-1">
                    <i>275</i><i>+</i><i>474</i><i>=</i><i class="box"></i>
                </div>
                <div class="question flex-1">
                    <i>455</i><i>+</i><i>725</i><i>=</i><i class="box"></i>
                </div>
            </div>
            <div class="flex origin-left mt-2">
                <div class="question flex-1">
                    <i>775</i><i>-</i><i>50</i><i>=</i><i class="box"></i>
                </div>
                <div class="question flex-1">
                    <i>910</i><i>-</i><i>626</i><i>=</i><i class="box"></i>
                </div>
                <div class="question flex-1">
                    <i>950</i><i>-</i><i>120</i><i>=</i><i class="box"></i>
                </div>
            </div>
            <div class="flex origin-left mt-2">
                <div class="question flex-1">
                    <i>36</i><i>+</i><i class="box"></i><i>=</i><i>883</i>
                </div>
                <div class="question flex-1">
                    <i>291</i><i>+</i><i class="box"></i><i>=</i><i>793</i>
                </div>
                <div class="question flex-1">
                    <i>333</i><i>+</i><i class="box"></i><i>=</i><i>966</i>
                </div>
            </div>
            <div class="flex origin-left mt-2">
                <div class="question flex-1">
                    <i>47</i><i>×</i><i>7</i><i>=</i><i class="box"></i>
                </div>
                <div class="question flex-1">
                    <i>9</i><i>×</i><i>93</i><i>=</i><i class="box"></i>
                </div>
                <div class="question flex-1">
                    <i>368</i><i>×</i><i>4</i><i>=</i><i class="box"></i>
                </div>
            </div>
            <div class="flex origin-left mt-2">
                <div class="question flex-1">
                    <i>368</i><i>÷</i><i>8</i><i>=</i><i class="box"></i>
                </div>
                <div class="question flex-1">
                    <i>795</i><i>÷</i><i>5</i><i>=</i><i class="box"></i>
                </div>
                <div class="question flex-1">
                    <i>918</i><i>÷</i><i>6</i><i>=</i><i class="box"></i>
                </div>
            </div>
            <hr class="mt-2">
            <div class="flex origin-left mt-2">
                <div class="question flex-1">
                    <i class="box"></i><i>-</i><i>203</i><i>=</i><i>890</i><i>-</i><i>490</i>
                </div>
                <div class="question flex-1">
                    <i>100</i><i>+</i><i>186</i><i>+</i><i>408</i><i>+</i><i>102</i><i>=</i><i class="box"></i>
                </div>
            </div>
            <div class="flex origin-left mt-2">
                <div class="question flex-1">
                    <i>790</i><i>-</i><i>222</i><i>=</i><i class="box"></i><i>+</i><i>303</i>
                </div>
                <div class="question flex-1">
                    <i>530</i><i>+</i><i>354</i><i>+</i><i>228</i><i>-</i><i>942</i><i>=</i><i class="box"></i>
                </div>
            </div>
            <div class="flex origin-left mt-2">
                <div class="question flex-1">
                    <i>276</i><i>+</i><i class="box"></i><i>+</i><i>312</i><i>=</i><i>940</i>
                </div>
                <div class="question flex-1">
                    <i>441</i><i>+</i><i>432</i><i>-</i><i>233</i><i>-</i><i>369</i><i>=</i><i class="box"></i>
                </div>
            </div>
            <div class="flex origin-left mt-2">
                <div class="question flex-1">
                    <i>298</i><i>+</i><i class="box"></i><i>-</i><i>561</i><i>=</i><i>493</i>
                </div>
                <div class="question flex-1">
                    <i>999</i><i>-</i><i>241</i><i>-</i><i>182</i><i>-</i><i>475</i><i>=</i><i class="box"></i>
                </div>
            </div>
        </div>
        <hr class="my-2">
        <div id="char" class="flex flex-col max-w-2xl mx-auto">
            <code class="hidden">凹凸司机平</code>
            <div>
                <div class="flex scale-[0.7] origin-left w-fit sample">
                    <svg><use href="#char0"></use></svg>
                    <svg><use href="#char0"></use></svg>
                    <svg><use href="#char0"></use></svg>
                    <svg><use href="#char0"></use></svg>
                    <svg>
                        <g id="char0">
                            <path d="M 212 620 Q 185 639 157 647 Q 148 650 143 644 Q 133 637 144 624 Q 211 501 209 203 Q 210 128 253 96 L 255 95 Q 274 89 277 122 L 276 164 Q 275 185 269 207 Q 239 477 238 584 C 238 604 237 604 212 620 Z"></path>
                            <path d="M 554 414 Q 517 410 479 401 Q 457 395 452 404 Q 439 420 446 568 Q 445 610 457 633 Q 472 655 451 665 Q 429 678 407 686 Q 385 696 371 682 Q 331 648 212 620 C 183 613 208 580 238 584 Q 251 583 264 589 Q 357 637 382 622 Q 391 618 391 590 Q 395 425 387 387 Q 386 369 402 346 Q 412 328 423 326 Q 433 325 446 339 Q 489 384 601 379 Q 622 378 622 382 Q 626 394 604 411 Q 601 414 599 415 C 594 419 584 418 554 414 Z"></path>
                            <path d="M 630 675 Q 612 694 590 708 Q 577 715 565 712 Q 555 706 559 689 Q 572 650 573 610 Q 572 570 554 414 C 551 384 595 385 599 415 Q 627 607 643 636 C 651 654 651 654 630 675 Z"></path>
                            <path d="M 700 160 Q 712 132 738 78 Q 748 59 759 60 Q 777 63 787 92 Q 841 201 845 347 Q 855 438 862 544 Q 869 595 895 625 Q 914 646 902 660 Q 880 685 831 708 Q 812 720 777 709 Q 741 696 701 686 Q 670 680 630 675 C 600 671 613 632 643 636 Q 644 636 771 655 Q 781 656 788 651 Q 801 626 802 600 Q 798 407 758 220 Q 754 187 740 184 Q 737 183 733 184 C 708 167 699 161 700 160 Z"></path>
                            <path d="M 277 122 Q 289 121 303 122 Q 430 147 700 160 C 730 161 753 163 733 184 Q 726 194 702 211 Q 683 224 643 216 Q 439 177 276 164 C 246 162 247 123 277 122 Z"></path>
                        </g>
                    </svg>
                </div>
                <div class="write-them-down flex w-100 justify-between">
                    <svg><use href="#char0"></use></svg>
                    <svg><use href="#char0"></use></svg>
                    <svg><use href="#char0"></use></svg>
                    <svg><use href="#char0"></use></svg>
                    <svg><use href="#char0"></use></svg>
                    <svg><use href="#char0"></use></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                </div>
            </div>
            <hr class="my-2">
            <div>
                <div class="flex scale-[0.7] origin-left w-fit sample">
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg>
                        <g id="char1">
                            <path d="M 387 744 Q 371 756 352 762 Q 337 768 328 762 Q 319 755 326 740 Q 348 694 358 644 Q 364 595 371 407 C 372 377 414 376 413 406 Q 404 634 414 697 Q 415 706 414 712 C 414 726 412 727 387 744 Z"></path>
                            <path d="M 371 407 Q 287 388 223 376 C 194 370 210 328 238 338 Q 237 339 239 339 Q 284 349 429 372 Q 438 371 445 382 Q 446 392 427 400 Q 423 403 413 406 C 395 412 395 412 371 407 Z"></path>
                            <path d="M 223 376 Q 193 395 163 401 Q 156 402 150 397 Q 143 391 153 380 Q 201 311 219 129 Q 228 59 264 40 L 267 39 Q 283 35 285 62 L 280 101 Q 277 119 271 137 Q 247 258 238 338 C 235 368 234 369 223 376 Z"></path>
                            <path d="M 734 90 Q 747 65 754 42 Q 755 29 768 25 Q 778 24 797 45 Q 824 70 828 113 Q 847 207 865 316 Q 869 341 893 368 Q 908 384 894 401 Q 878 414 829 444 Q 808 456 787 446 Q 702 433 659 425 Q 635 422 637 448 Q 643 572 659 683 Q 660 705 687 733 Q 700 748 684 762 Q 663 781 622 799 Q 610 805 597 795 Q 555 773 517 763 Q 468 753 387 744 C 357 740 385 706 414 712 Q 558 743 580 746 Q 590 747 595 740 Q 596 737 591 598 Q 579 444 571 422 Q 555 397 582 377 L 584 375 Q 591 369 610 378 Q 763 423 794 393 Q 807 378 801 342 Q 788 186 769 141 Q 760 113 750 118 Q 747 119 743 121 C 726 108 726 108 734 90 Z"></path>
                            <path d="M 285 62 Q 294 61 305 62 Q 441 84 734 90 C 764 91 766 102 743 121 Q 716 148 674 141 Q 454 107 280 101 C 250 100 255 63 285 62 Z"></path>
                        </g>
                    </svg>
                </div>
                <div class="write-them-down flex w-100 justify-between">
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg><use href="#char1"></use></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                </div>
            </div>
            <hr class="my-2">
            <div>
                <div class="flex scale-[0.7] origin-left w-fit sample">
                    <svg><use href="#char2"></use></svg>
                    <svg><use href="#char2"></use></svg>
                    <svg><use href="#char2"></use></svg>
                    <svg><use href="#char2"></use></svg>
                    <svg>
                        <g id="char2">
                            <path d="M 344 745 Q 319 745 319 731 Q 320 719 345 701 Q 375 682 419 691 Q 497 719 633 738 Q 732 756 739 725 Q 740 698 733 576 Q 721 344 723 199 Q 724 93 714 80 Q 708 71 696 71 Q 683 72 608 89 Q 595 93 591 87 Q 588 78 617 58 Q 668 22 702 -13 Q 733 -44 744 -41 Q 754 -40 765 -21 Q 795 36 792 76 Q 761 653 822 715 Q 831 727 830 733 Q 830 745 797 770 Q 751 803 738 804 Q 725 804 709 799 Q 655 780 538 762 Q 426 744 344 745 Z"></path>
                            <path d="M 298 570 Q 261 564 287 546 Q 332 522 387 534 Q 463 547 541 563 Q 577 570 582 575 Q 592 582 587 592 Q 580 604 550 612 Q 528 618 433 591 Q 348 575 298 570 Z"></path>
                            <path d="M 237 415 Q 233 416 227 416 Q 214 419 211 413 Q 204 406 214 390 Q 248 329 271 226 Q 275 195 294 175 Q 315 153 319 170 Q 323 186 321 211 L 314 246 Q 292 342 287 374 C 282 404 267 412 237 415 Z"></path>
                            <path d="M 540 277 Q 565 358 599 384 Q 615 403 600 422 Q 582 437 527 462 Q 508 471 485 461 Q 335 401 237 415 C 207 418 258 368 287 374 Q 297 375 313 380 Q 392 393 469 408 Q 488 412 497 404 Q 507 397 505 378 Q 498 326 488 284 C 481 255 531 248 540 277 Z"></path>
                            <path d="M 321 211 Q 328 210 339 212 Q 406 228 552 243 Q 562 244 564 254 Q 564 261 540 277 L 488 284 Q 485 285 482 284 Q 388 259 314 246 C 284 241 291 212 321 211 Z"></path>
                        </g>
                    </svg>
                </div>
                <div class="write-them-down flex w-100 justify-between">
                    <svg><use href="#char2"></use></svg>
                    <svg><use href="#char2"></use></svg>
                    <svg><use href="#char2"></use></svg>
                    <svg><use href="#char2"></use></svg>
                    <svg><use href="#char2"></use></svg>
                    <svg><use href="#char2"></use></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                </div>
            </div>
            <hr class="my-2">
            <div>
                <div class="flex scale-[0.7] origin-left w-fit sample">
                    <svg><use href="#char3"></use></svg>
                    <svg><use href="#char3"></use></svg>
                    <svg><use href="#char3"></use></svg>
                    <svg><use href="#char3"></use></svg>
                    <svg><use href="#char3"></use></svg>
                    <svg>
                        <g id="char3">
                            <path d="M 331 513 Q 418 540 420 541 Q 427 548 423 557 Q 416 567 388 574 Q 360 578 332 568 L 286 551 Q 178 520 96 508 Q 62 501 87 486 Q 123 465 192 481 Q 226 490 267 497 L 331 513 Z"></path>
                            <path d="M 282 421 Q 278 336 277 241 Q 271 165 250 93 Q 238 54 263 -9 Q 270 -28 278 -31 Q 284 -38 292 -29 Q 299 -25 310 -4 Q 320 21 320 52 Q 319 100 331 513 L 332 568 Q 332 569 333 570 Q 334 667 354 731 Q 363 747 360 760 Q 353 770 298 805 Q 274 823 253 807 Q 249 803 254 787 Q 285 738 286 689 Q 286 625 286 551 L 282 421 Z"></path>
                            <path d="M 267 497 Q 218 359 54 148 Q 50 138 60 138 Q 66 137 74 145 Q 203 256 282 421 C 331 522 277 525 267 497 Z"></path>
                            <path d="M 347 396 Q 395 336 419 333 Q 431 332 437 348 Q 438 360 430 377 Q 420 393 399 401 Q 365 417 351 419 Q 342 420 342 411 Q 341 404 347 396 Z"></path>
                            <path d="M 541 560 Q 493 581 479 579 Q 461 575 476 556 Q 506 508 493 313 Q 486 262 463 203 Q 441 140 366 65 Q 353 53 350 47 Q 349 40 360 41 Q 399 44 457 113 Q 523 191 538 314 Q 548 390 548 505 Q 551 524 552 534 C 555 554 555 554 541 560 Z"></path>
                            <path d="M 963 53 Q 994 63 982 96 Q 960 151 957 238 Q 956 263 950 267 Q 940 273 937 257 Q 913 131 887 111 Q 872 101 837 101 Q 753 101 713 167 Q 652 267 699 474 Q 718 541 756 575 Q 781 599 750 610 Q 734 617 697 627 Q 676 633 627 601 Q 578 576 541 560 C 514 548 523 526 552 534 Q 580 541 639 562 Q 651 568 657 564 Q 663 555 647 406 Q 611 148 754 59 Q 799 32 865 31 Q 914 32 963 53 Z"></path>
                        </g>
                    </svg>
                </div>
                <div class="write-them-down flex w-100 justify-between">
                    <svg><use href="#char3"></use></svg>
                    <svg><use href="#char3"></use></svg>
                    <svg><use href="#char3"></use></svg>
                    <svg><use href="#char3"></use></svg>
                    <svg><use href="#char3"></use></svg>
                    <svg><use href="#char3"></use></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                </div>
            </div>
            <hr class="my-2">
            <div>
                <div class="flex scale-[0.7] origin-left w-fit sample">
                    <svg><use href="#char4"></use></svg>
                    <svg><use href="#char4"></use></svg>
                    <svg><use href="#char4"></use></svg>
                    <svg><use href="#char4"></use></svg>
                    <svg>
                        <g id="char4">
                            <path d="M 510 748 Q 694 790 699 793 Q 708 802 703 811 Q 696 824 664 832 Q 637 838 533 805 Q 437 781 347 772 Q 307 765 335 747 Q 378 720 441 735 Q 445 736 452 736 L 510 748 Z"></path>
                            <path d="M 284 593 Q 309 560 336 521 Q 346 505 362 503 Q 372 502 381 513 Q 388 526 386 558 Q 385 580 355 604 Q 283 650 268 647 Q 262 644 261 631 Q 262 619 284 593 Z"></path>
                            <path d="M 672 657 Q 657 627 590 535 Q 580 517 598 522 Q 632 544 720 613 Q 738 631 763 643 Q 785 656 772 673 Q 757 691 728 704 Q 703 717 689 713 Q 676 710 681 696 Q 685 677 672 657 Z"></path>
                            <path d="M 536 402 Q 638 414 915 413 Q 937 413 943 422 Q 950 435 931 452 Q 862 501 797 482 Q 694 464 536 440 L 482 434 Q 316 415 127 393 Q 102 392 120 371 Q 153 338 199 347 Q 376 395 464 395 Q 471 396 481 396 L 536 402 Z"></path>
                            <path d="M 480 -7 Q 486 -35 493 -45 Q 499 -52 507 -50 Q 523 -41 530 24 Q 540 118 538 212 Q 535 263 536 402 L 536 440 Q 539 642 551 702 Q 555 721 539 731 Q 523 741 510 748 C 484 763 438 762 452 736 Q 453 735 455 733 Q 482 678 483 643 Q 484 552 482 434 L 481 396 Q 475 42 480 -7 Z"></path>
                        </g>
                    </svg>
                </div>
                <div class="write-them-down flex w-100 justify-between">
                    <svg><use href="#char4"></use></svg>
                    <svg><use href="#char4"></use></svg>
                    <svg><use href="#char4"></use></svg>
                    <svg><use href="#char4"></use></svg>
                    <svg><use href="#char4"></use></svg>
                    <svg><use href="#char4"></use></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                    <svg></svg>
                </div>
            </div>
        </div>
    </section>
    <style>
        path {
            /* 仅当 --char-index === --stroke-index 时，可得 1（true），否则 0 （false）*/
            --is-current: clamp(0,
                    calc(1 - (var(--char-index) - var(--stroke-index)) * (var(--char-index) - var(--stroke-index))),
                    1);
            /* 仅当 --char-index > --stroke-index 时，可得 1（true），否则 0 （false）*/
            --is-past: clamp(0,
                    calc(var(--char-index) - var(--stroke-index)),
                    1);
            /* 仅当 --char-index < --stroke-index 时，可得 1（true），否则 0 （false）*/
            --is-next: clamp(0,
                    calc(var(--stroke-index) - var(--char-index)),
                    1);
            /* 设计不同场景下笔画填色
                当前笔画：红色 - current: rgba(187,  68,  68, 1);
                之前笔画：黑色 - past:    rgba( 85,  85,  85, 1);
                后继笔画：透明 - next:    rgba(any, any, any, 0);
                描红笔画：灰色 - gray:    rgba(185, 185, 185, 1);
                */
            --stroke-color: rgba(calc(85 * var(--is-past) + 187 * var(--is-current) + 68 * var(--is-gray)),
                    calc(85 * var(--is-past) + 68 * var(--is-current) + 68 * var(--is-gray)),
                    calc(85 * var(--is-past) + 68 * var(--is-current) + 68 * var(--is-gray)),
                    calc(1 - var(--is-next)));
            fill: var(--stroke-color);
        }
        :root {
            --is-gray: 0;
            /* 初始化为 100，使描红字样必定计算出 --is-past=1，--is-current=0 --is-next=0 */
            --char-index: 100;
        }
        .write-them-down {
            /* 描红格子里填充灰色 */
            --is-gray: 1;
        }
        #char svg {
            display: inline-block;
            background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAAAP1BMVEUAAABFoFBGoFBGoFBGoVFGn1BDn1JEoVNFp1hEoE9En1FHoVJKoldFoE9GoFBFoFBGn1NGoE9HoU9GoVBEn1Jj1l/OAAAAFXRSTlMAMma7X201CQUsIRUNs6uPKKF6STipww1qAAABtklEQVRo3u2b2Y6DMAxFfQnD2pbO8v/fOlKL5JFoUZMmXpict4qSIyEwxrEpgFJpGkplIEKAvBiXm7mTFa9KNkuJWcjmwuKNDouYeHNTiYn7M0hFTD1V9FhAOiAUNaPdfbQLwIsLm3npcub0hRHmiACS8/aZqYB43HiFQuZpJFkxU8XP+IGSGAF5xGOvE7cRxiyhpuwifJK8d3u1RRfAZPn1/pwWVDEcMv8yKYmngFhxXyxu74txzmbuIsT89wJmFid4080sLp8g4+uh2E6cHC4gHQaq+ObTYM0ADRWBw0PEgVLmphHxsoLFIl6WnFgsGidXL4uvsvGZxcOVXsBRslfFd75VoydmEoTNbz2/7Ur8b4SAN87/WKGVV3+v4uTzBS71UW6uyMfpAAHkX4t3XouHSAQiUx/3yV5keus+oY/9hPH/0VYxxEBxmC03RRbY3JcU44uovsvGKYVy31sDk9mcq5KK/qZmjm1cTxvXCJ3XFoH7Ik7aMTI2oDhpubEdMqt4v3XOarNgyfZIiw2hDw/7br29LW6uzXmp3/sVKwMa6SMpekM4emNHeoNWWqNlesN0auODvzsxCat6cG0IAAAAAElFTkSuQmCC");
            background-size: contain;
            border: 1px solid rgba(70, 160, 80, 0.5);
            width: 54px;
            height: 54px;
        }
        g {
            transform: translate(5px, 43.671875px) scale(0.04296875, -0.04296875);
        }
        .sample>svg+svg {
            margin-left: 4px;
        }
        #math {
            font-family: 'Courier New', Courier, monospace;
            font-size: 24px;
            color: #666;
        }
        #math .question {
            text-align: center;
        }
        #math .question:first-child {
            text-align: left;
        }
        #math .question:last-child {
            text-align: right;
        }
        #math .question>i {
            display: inline-block;
            vertical-align: middle;
            text-align: center;
            width: 36px;
            height: 36px;
            font-style: normal;
        }
        #math .box {
            border-bottom: 1px solid #aaa;
        }
    </style>
    <script>
        const injectedStyles = Array.from({ length: 100 })
            .map((_, idx) => `
                .sample > svg:nth-child(${idx + 1}) { --char-index: ${idx + 1}; }
                path:nth-child(${idx + 1}) { --stroke-index: ${idx + 1}; }
                `
            ).join('\n')
        document.querySelector('#injected')?.remove()
        document.head.insertAdjacentHTML('beforeend', `<style id="injected">${injectedStyles}</style>`)
    </script>
</body>
</html>
